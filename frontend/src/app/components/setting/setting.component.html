<div class="settings-wrapper">
  <h2>User Settings</h2>

  <div class="form-group">
    <label>Name</label>
    <input type="text" [value]="user?.name" disabled />
  </div>

  <div class="form-group">
    <label>Email</label>
    <input type="text" [value]="user?.email" disabled />
  </div>

  <div class="form-group">
    <label>Role</label>
    <input type="text" [value]="roleName" disabled />
  </div>

  <button class="btn-primary" (click)="openChangePasswordModal()">Change Password</button>

  <!-- Change Password Modal -->
  <div class="modal-overlay" *ngIf="showPasswordModal" (click)="closeModal()">
    <div class="modal" (click)="$event.stopPropagation()">
      <h3>Change Password</h3>

      <!-- Current Password -->
      <div class="password-field">
        <input [type]="showCurrent ? 'text' : 'password'" [(ngModel)]="changePasswordModel.currentPassword"
          placeholder="Current Password" required />
        <span class="toggle-eye" (click)="showCurrent = !showCurrent">
          <i class="fa" [ngClass]="showCurrent ? 'fa-eye-slash' : 'fa-eye'"></i>
        </span>
      </div>

      <!-- New Password -->
      <div class="password-field">
        <input [type]="showNew ? 'text' : 'password'" [(ngModel)]="changePasswordModel.newPassword"
          placeholder="New Password" required />
        <span class="toggle-eye" (click)="showNew = !showNew">
          <i class="fa" [ngClass]="showNew ? 'fa-eye-slash' : 'fa-eye'"></i>
        </span>
      </div>

      <!-- Confirm New Password -->
      <div class="password-field">
        <input [type]="showConfirm ? 'text' : 'password'" [(ngModel)]="confirmNewPassword"
          placeholder="Confirm New Password" required />
        <span class="toggle-eye" (click)="showConfirm = !showConfirm">
          <i class="fa" [ngClass]="showConfirm ? 'fa-eye-slash' : 'fa-eye'"></i>
        </span>
      </div>

      <div *ngIf="passwordError" class="error">{{ passwordError }}</div>

      <button class="btn-primary" (click)="submitPassword()">Change</button>
      <button class="cancel-btn" (click)="closeModal()">Cancel</button>
    </div>
  </div>


<!-- OTP Modal -->
<div class="modal-overlay" *ngIf="showOTPModal" (click)="closeModal()">
  <div class="modal otp-modal" (click)="$event.stopPropagation()">
    <h3>Enter OTP</h3>
<input type="text"
       maxlength="6"
       [(ngModel)]="changePasswordModel.otpCode"
       (input)="onOtpInput()"
       class="otp-input"
       placeholder="Enter 6-digit OTP" />
  </div>
</div>

